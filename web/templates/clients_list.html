<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–ª–∏–µ–Ω—Ç—ã</title>
  <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
<header class="topbar">
  <a href="/" class="logo">IB Integrator</a>

  <nav>
    <a href="/clients">–ö–ª–∏–µ–Ω—Ç—ã</a>
    <a href="/assets">–û–±—ä–µ–∫—Ç—ã –∑–∞—â–∏—Ç—ã</a>
    {{ if .IsAdmin }}
      <a href="/audit">–ê—É–¥–∏—Ç</a>
    {{ end }}
    <a href="/logout">–í—ã—Ö–æ–¥</a>
  </nav>

  <div class="user-info">
    {{ if .CurrentUser }}
      üë§ {{ .CurrentUser.Username }} ({{ .CurrentUser.Role }})
    {{ end }}
  </div>
</header>

<main class="content">
  <div class="page-header">
    <h2>–ö–ª–∏–µ–Ω—Ç—ã</h2>

    {{/* –ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç: admin –∏–ª–∏ sales */}}
    {{ if or .IsAdmin .IsSales }}
      <a class="btn" href="/clients/new">–ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç</a>
    {{ end }}
  </div>

  {{ if not .clients }}
    <p>–ö–ª–∏–µ–Ω—Ç—ã –ø–æ–∫–∞ –Ω–µ –∑–∞–≤–µ–¥–µ–Ω—ã.</p>
  {{ else }}
    <table class="table">
      <thead>
      <tr>
        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
        <th>–¢–∏–ø</th>
        <th>–û—Ç—Ä–∞—Å–ª—å</th>
        <th>–ö–æ–Ω—Ç–∞–∫—Ç</th>
        {{ if .IsAdmin }}<th>–î–µ–π—Å—Ç–≤–∏—è</th>{{ end }}
      </tr>
      </thead>

      <tbody>
      {{ range .clients }}
        <tr>
          <td><a href="/clients/{{ .ID }}">{{ .Name }}</a></td>
          <td>{{ .OrgType }}</td>
          <td>{{ .Industry }}</td>
          <td>
            {{ if .ContactName }}{{ .ContactName }}{{ end }}
            {{ if and .ContactName .ContactPost }} ‚Äî {{ end }}
            {{ if .ContactPost }}{{ .ContactPost }}{{ end }}
            <br>
            {{ if .ContactEmail }}{{ maskEmail .ContactEmail }}{{ end }}
            {{ if and .ContactEmail .ContactPhone }} / {{ end }}
            {{ if .ContactPhone }}{{ maskPhone .ContactPhone }}{{ end }}
          </td>

          {{ if $.IsAdmin }}
            <td>
              <a class="btn" href="/clients/{{ .ID }}/edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
            </td>
          {{ end }}
        </tr>
      {{ end }}
      </tbody>
    </table>
  {{ end }}
</main>
</body>
</html>
